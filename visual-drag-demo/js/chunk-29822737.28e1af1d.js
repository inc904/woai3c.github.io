(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-29822737"],{"0246":function(t,e,n){},"0353":function(t,e,n){},"0898":function(t,e,n){"use strict";n("aa56")},"0db6":function(t,e,n){},1276:function(t,e,n){"use strict";var o=n("2ba4"),i=n("c65b"),r=n("e330"),a=n("d784"),c=n("44e7"),s=n("825a"),l=n("1d80"),u=n("4840"),h=n("8aa5"),f=n("50c4"),d=n("577e"),m=n("dc4a"),p=n("4dae"),v=n("14c3"),g=n("9263"),b=n("9f7f"),y=n("d039"),w=b.UNSUPPORTED_Y,x=4294967295,S=Math.min,C=[].push,O=r(/./.exec),k=r(C),E=r("".slice),$=!y((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));a("split",(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=d(l(this)),a=void 0===n?x:n>>>0;if(0===a)return[];if(void 0===t)return[r];if(!c(t))return i(e,r,t,a);var s,u,h,f=[],m=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),v=0,b=new RegExp(t.source,m+"g");while(s=i(g,b,r)){if(u=b.lastIndex,u>v&&(k(f,E(r,v,s.index)),s.length>1&&s.index<r.length&&o(C,f,p(s,1)),h=s[0].length,v=u,f.length>=a))break;b.lastIndex===s.index&&b.lastIndex++}return v===r.length?!h&&O(b,"")||k(f,""):k(f,E(r,v)),f.length>a?p(f,0,a):f}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:i(e,this,t,n)}:e,[function(e,n){var o=l(this),a=void 0==e?void 0:m(e,t);return a?i(a,e,o,n):i(r,d(o),e,n)},function(t,o){var i=s(this),a=d(t),c=n(r,i,a,o,r!==e);if(c.done)return c.value;var l=u(i,RegExp),m=i.unicode,p=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(w?"g":"y"),g=new l(w?"^(?:"+i.source+")":i,p),b=void 0===o?x:o>>>0;if(0===b)return[];if(0===a.length)return null===v(g,a)?[a]:[];var y=0,C=0,O=[];while(C<a.length){g.lastIndex=w?0:C;var $,j=v(g,w?E(a,C):a);if(null===j||($=S(f(g.lastIndex+(w?C:0)),a.length))===y)C=h(a,C,m);else{if(k(O,E(a,y,C)),O.length===b)return O;for(var L=1;L<=j.length-1;L++)if(k(O,j[L]),O.length===b)return O;C=y=$}}return k(O,E(a,y)),O}]}),!$,w)},"14c3":function(t,e,n){var o=n("da84"),i=n("c65b"),r=n("825a"),a=n("1626"),c=n("c6b6"),s=n("9263"),l=o.TypeError;t.exports=function(t,e){var n=t.exec;if(a(n)){var o=i(n,t,e);return null!==o&&r(o),o}if("RegExp"===c(t))return i(s,t,e);throw l("RegExp#exec called on incompatible receiver")}},2187:function(t,e,n){"use strict";n("fd09")},"21bb":function(t,e,n){"use strict";n("2dad")},2299:function(t,e,n){},"25f0":function(t,e,n){"use strict";var o=n("e330"),i=n("5e77").PROPER,r=n("6eeb"),a=n("825a"),c=n("3a9b"),s=n("577e"),l=n("d039"),u=n("ad6d"),h="toString",f=RegExp.prototype,d=f[h],m=o(u),p=l((function(){return"/a/b"!=d.call({source:"a",flags:"b"})})),v=i&&d.name!=h;(p||v)&&r(RegExp.prototype,h,(function(){var t=a(this),e=s(t.source),n=t.flags,o=s(void 0===n&&c(f,t)&&!("flags"in f)?m(t):n);return"/"+e+"/"+o}),{unsafe:!0})},"2a98":function(t,e,n){"use strict";n("7d80")},"2c7d":function(t,e,n){"use strict";n.d(e,"a",(function(){return k})),n.d(e,"b",(function(){return P}));var o,i,r=n("5530"),a=n("ade3"),c=n("4360"),s=n("986e"),l=17,u=91,h=86,f=67,d=88,m=89,p=90,v=71,g=66,b=76,y=85,w=83,x=80,S=68,C=46,O=69,k=[66,67,68,69,71,76,80,83,85,86,88,89,90],E=(o={},Object(a["a"])(o,h,D),Object(a["a"])(o,m,N),Object(a["a"])(o,p,M),Object(a["a"])(o,w,R),Object(a["a"])(o,x,F),Object(a["a"])(o,O,V),o),$=Object(r["a"])(Object(r["a"])({},E),{},Object(a["a"])({},y,Y)),j=Object(r["a"])(Object(r["a"])({},E),{},(i={},Object(a["a"])(i,f,_),Object(a["a"])(i,d,I),Object(a["a"])(i,v,A),Object(a["a"])(i,g,T),Object(a["a"])(i,S,U),Object(a["a"])(i,C,U),Object(a["a"])(i,b,G),i)),L=!1;function P(){window.onkeydown=function(t){if(c["a"].state.isInEdiotr){var e=c["a"].state.curComponent,n=t.keyCode;n===l||n===u?L=!0:n==C&&e?(c["a"].commit("deleteComponent"),c["a"].commit("recordSnapshot")):L&&(!j[n]||e&&e.isLock?$[n]&&e&&e.isLock&&(t.preventDefault(),$[n]()):(t.preventDefault(),j[n]()))}},window.onkeyup=function(t){t.keyCode!==l&&t.keyCode!==u||(L=!1)},window.onmousedown=function(){c["a"].commit("setInEditorStatus",!1)}}function _(){c["a"].commit("copy")}function D(){c["a"].commit("paste"),c["a"].commit("recordSnapshot")}function I(){c["a"].commit("cut")}function N(){c["a"].commit("redo")}function M(){c["a"].commit("undo")}function A(){c["a"].state.areaData.components.length&&(c["a"].commit("compose"),c["a"].commit("recordSnapshot"))}function T(){var t=c["a"].state.curComponent;t&&!t.isLock&&"Group"==t.component&&(c["a"].commit("decompose"),c["a"].commit("recordSnapshot"))}function R(){s["a"].$emit("save")}function F(){s["a"].$emit("preview")}function U(){c["a"].state.curComponent&&(c["a"].commit("deleteComponent"),c["a"].commit("recordSnapshot"))}function V(){s["a"].$emit("clearCanvas")}function G(){c["a"].commit("lock")}function Y(){c["a"].commit("unlock")}},"2dad":function(t,e,n){},"408a":function(t,e,n){var o=n("e330");t.exports=o(1..valueOf)},"45cf":function(t,e,n){},"4e72":function(t,e,n){"use strict";n("5359")},"4f06":function(t,e,n){"use strict";n("d897")},5359:function(t,e,n){},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var o=n("e330"),i=n("1d80"),r=n("577e"),a=n("5899"),c=o("".replace),s="["+a+"]",l=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),h=function(t){return function(e){var n=r(i(e));return 1&t&&(n=c(n,l,"")),2&t&&(n=c(n,u,"")),n}};t.exports={start:h(1),end:h(2),trim:h(3)}},"5aaf":function(t,e,n){"use strict";n("edd9")},"5c43":function(t,e,n){},"5fc1":function(t,e,n){"use strict";n("a9eb")},6637:function(t,e,n){"use strict";n("0246")},"6dc2":function(t,e,n){"use strict";n("45cf")},"7b60":function(t,e,n){"use strict";n("a08a")},"7d80":function(t,e,n){},"7e6f":function(t,e,n){"use strict";n("5c43")},"847a":function(t,e,n){},"8aa5":function(t,e,n){"use strict";var o=n("6547").charAt;t.exports=function(t,e,n){return e+(n?o(t,e).length:1)}},"8c51":function(t,e,n){"use strict";n("0db6")},"8cab":function(t,e,n){"use strict";n("0353")},"96cf":function(t,e,n){var o=function(t){"use strict";var e,n=Object.prototype,o=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},r=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(D){s=function(t,e,n){return t[e]=n}}function l(t,e,n,o){var i=e&&e.prototype instanceof v?e:v,r=Object.create(i.prototype),a=new L(o||[]);return r._invoke=k(t,n,a),r}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(D){return{type:"throw",arg:D}}}t.wrap=l;var h="suspendedStart",f="suspendedYield",d="executing",m="completed",p={};function v(){}function g(){}function b(){}var y={};s(y,r,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(P([])));x&&x!==n&&o.call(x,r)&&(y=x);var S=b.prototype=v.prototype=Object.create(y);function C(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function n(i,r,a,c){var s=u(t[i],t,r);if("throw"!==s.type){var l=s.arg,h=l.value;return h&&"object"===typeof h&&o.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(h).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,c)}))}c(s.arg)}var i;function r(t,o){function r(){return new e((function(e,i){n(t,o,e,i)}))}return i=i?i.then(r,r):r()}this._invoke=r}function k(t,e,n){var o=h;return function(i,r){if(o===d)throw new Error("Generator is already running");if(o===m){if("throw"===i)throw r;return _()}n.method=i,n.arg=r;while(1){var a=n.delegate;if(a){var c=E(a,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=u(t,e,n);if("normal"===s.type){if(o=n.done?m:f,s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=m,n.method="throw",n.arg=s.arg)}}}function E(t,n){var o=t.iterator[n.method];if(o===e){if(n.delegate=null,"throw"===n.method){if(t.iterator["return"]&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method))return p;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var i=u(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,p;var r=i.arg;return r?r.done?(n[t.resultName]=r.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):r:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function $(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach($,this),this.reset(!0)}function P(t){if(t){var n=t[r];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){while(++i<t.length)if(o.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:_}}function _(){return{value:e,done:!0}}return g.prototype=b,s(S,"constructor",b),s(b,"constructor",g),g.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,c,"GeneratorFunction")),t.prototype=Object.create(S),t},t.awrap=function(t){return{__await:t}},C(O.prototype),s(O.prototype,a,(function(){return this})),t.AsyncIterator=O,t.async=function(e,n,o,i,r){void 0===r&&(r=Promise);var a=new O(l(e,n,o,i),r);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},C(S),s(S,c,"Generator"),s(S,r,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){while(e.length){var o=e.pop();if(o in t)return n.value=o,n.done=!1,n}return n.done=!0,n}},t.values=P,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(o,i){return c.type="throw",c.arg=t,n.next=o,i&&(n.method="next",n.arg=e),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],c=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),l=o.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&o.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=t,a.arg=e,r?(this.method="next",this.next=r.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var o=n.completion;if("throw"===o.type){var i=o.arg;j(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,o){return this.delegate={iterator:P(t),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=e),p}},t}(t.exports);try{regeneratorRuntime=o}catch(i){"object"===typeof globalThis?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}},"9a5d":function(t,e,n){"use strict";n("2299")},a08a:function(t,e,n){},a0db:function(t,e,n){"use strict";n("847a")},a9e3:function(t,e,n){"use strict";var o=n("83ab"),i=n("da84"),r=n("e330"),a=n("94ca"),c=n("6eeb"),s=n("1a2d"),l=n("7156"),u=n("3a9b"),h=n("d9b5"),f=n("c04e"),d=n("d039"),m=n("241c").f,p=n("06cf").f,v=n("9bf2").f,g=n("408a"),b=n("58a8").trim,y="Number",w=i[y],x=w.prototype,S=i.TypeError,C=r("".slice),O=r("".charCodeAt),k=function(t){var e=f(t,"number");return"bigint"==typeof e?e:E(e)},E=function(t){var e,n,o,i,r,a,c,s,l=f(t,"number");if(h(l))throw S("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=b(l),e=O(l,0),43===e||45===e){if(n=O(l,2),88===n||120===n)return NaN}else if(48===e){switch(O(l,1)){case 66:case 98:o=2,i=49;break;case 79:case 111:o=8,i=55;break;default:return+l}for(r=C(l,2),a=r.length,c=0;c<a;c++)if(s=O(r,c),s<48||s>i)return NaN;return parseInt(r,o)}return+l};if(a(y,!w(" 0o1")||!w("0b1")||w("+0x1"))){for(var $,j=function(t){var e=arguments.length<1?0:w(k(t)),n=this;return u(x,n)&&d((function(){g(n)}))?l(Object(e),n,j):e},L=o?m(w):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),P=0;L.length>P;P++)s(w,$=L[P])&&!s(j,$)&&v(j,$,p(w,$));j.prototype=x,x.constructor=j,c(i,y,j)}},a9eb:function(t,e,n){},aa56:function(t,e,n){},bb51:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("Toolbar"),n("main",[n("section",{staticClass:"left"},[n("ComponentList"),n("RealTimeComponentList")],1),n("section",{staticClass:"center"},[n("div",{staticClass:"content",on:{drop:t.handleDrop,dragover:t.handleDragOver,mousedown:t.handleMouseDown,mouseup:t.deselectCurComponent}},[n("Editor")],1)]),n("section",{staticClass:"right"},[t.curComponent?n("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"属性",name:"attr"}},[n(t.curComponent.component+"Attr",{tag:"component"})],1),n("el-tab-pane",{attrs:{label:"动画",name:"animation"}},[n("AnimationList")],1),n("el-tab-pane",{attrs:{label:"事件",name:"events"}},[n("EventList")],1)],1):n("CanvasAttr")],1)])],1)},i=[],r=(n("d3b7"),n("159b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor",class:{edit:t.isEdit},style:Object.assign({},t.getCanvasStyle(t.canvasStyleData),{width:t.changeStyleWithScale(t.canvasStyleData.width)+"px",height:t.changeStyleWithScale(t.canvasStyleData.height)+"px"}),attrs:{id:"editor"},on:{contextmenu:t.handleContextMenu,mousedown:t.handleMouseDown}},[n("Grid"),t._l(t.componentData,(function(e,o){return n("Shape",{key:e.id,class:{lock:e.isLock},style:t.getShapeStyle(e.style),attrs:{"default-style":e.style,active:e.id===(t.curComponent||{}).id,element:e,index:o}},[e.component.startsWith("SVG")?n(e.component,{tag:"component",staticClass:"component",style:t.getSVGStyle(e.style),attrs:{id:"component"+e.id,"prop-value":e.propValue,element:e}}):"VText"!=e.component?n(e.component,{tag:"component",staticClass:"component",style:t.getComponentStyle(e.style),attrs:{id:"component"+e.id,"prop-value":e.propValue,element:e}}):n(e.component,{tag:"component",staticClass:"component",style:t.getComponentStyle(e.style),attrs:{id:"component"+e.id,"prop-value":e.propValue,element:e},on:{input:t.handleInput}})],1)})),n("ContextMenu"),n("MarkLine"),n("Area",{directives:[{name:"show",rawName:"v-show",value:t.isShowArea,expression:"isShowArea"}],attrs:{start:t.start,width:t.width,height:t.height}})],2)}),a=[],c=(n("caad"),n("2532"),n("ac1f"),n("1276"),n("2f62")),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"shape",class:{active:t.active},on:{click:t.selectCurComponent,mousedown:t.handleMouseDownOnShape}},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.isActive(),expression:"isActive()"}],staticClass:"iconfont icon-xiangyouxuanzhuan",on:{mousedown:t.handleRotate}}),n("span",{directives:[{name:"show",rawName:"v-show",value:t.element.isLock,expression:"element.isLock"}],staticClass:"iconfont icon-suo"}),t._l(t.isActive()?t.getPointList():[],(function(e){return n("div",{key:e,staticClass:"shape-point",style:t.getPointStyle(e),on:{mousedown:function(n){return t.handleMouseDownOnPoint(e,n)}}})})),t._t("default")],2)},l=[],u=(n("a4d3"),n("e01a"),n("d28b"),n("3ca3"),n("ddb0"),n("d9e2"),n("06c5"));function h(t,e){var n="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Object(u["a"])(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){c=!0,r=t},f:function(){try{a||null==n["return"]||n["return"]()}finally{if(c)throw r}}}}var f=n("5530"),d=(n("a9e3"),n("00b4"),n("986e"));function m(t,e,n,o,i,r,a){try{var c=t[r](a),s=c.value}catch(l){return void n(l)}c.done?e(s):Promise.resolve(s).then(o,i)}function p(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var r=t.apply(e,n);function a(t){m(r,o,i,a,c,"next",t)}function c(t){m(r,o,i,a,c,"throw",t)}a(void 0)}))}}n("96cf");function v(t){return g.apply(this,arguments)}function g(){return g=p(regeneratorRuntime.mark((function t(e){var n,o,i,r,a=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=a.length>1&&void 0!==a[1]?a[1]:[],o=function(t){return new Promise((function(n){var o=t.animationTime,i=t.value,r=void 0===i?"":i,a=t.isLoop;e.style.setProperty("--time",o+"s"),e.classList.add(r,"animated",b(a));var c=function t(){e.removeEventListener("animationend",t),e.removeEventListener("animationcancel",t),e.classList.remove(r,"animated",b(a)),e.style.removeProperty("--time"),n()};e.addEventListener("animationend",c),e.addEventListener("animationcancel",c)}))},i=0,r=n.length;case 3:if(!(i<r)){t.next=9;break}return t.next=6,o(n[i]);case 6:i++,t.next=3;break;case 9:case"end":return t.stop()}}),t)}))),g.apply(this,arguments)}function b(t){return t?"infinite":"no-infinite"}var y=n("a2ba"),w={lt:x,t:k,rt:S,r:E,rb:C,b:$,lb:O,l:j};function x(t,e,n,o,i){var r=i.symmetricPoint,a=Object(y["d"])(e,r),c=Object(y["a"])(e,a,-t.rotate),s=Object(y["a"])(r,a,-t.rotate),l=s.x-c.x,u=s.y-c.y;if(o){l/u>n?(c.x+=Math.abs(l-u*n),l=u*n):(c.y+=Math.abs(u-l/n),u=l/n);var h=Object(y["a"])(c,a,t.rotate);a=Object(y["d"])(h,r),c=Object(y["a"])(h,a,-t.rotate),s=Object(y["a"])(r,a,-t.rotate),l=s.x-c.x,u=s.y-c.y}l>0&&u>0&&(t.width=Math.round(l),t.height=Math.round(u),t.left=Math.round(c.x),t.top=Math.round(c.y))}function S(t,e,n,o,i){var r=i.symmetricPoint,a=Object(y["d"])(e,r),c=Object(y["a"])(e,a,-t.rotate),s=Object(y["a"])(r,a,-t.rotate),l=c.x-s.x,u=s.y-c.y;if(o){l/u>n?(c.x-=Math.abs(l-u*n),l=u*n):(c.y+=Math.abs(u-l/n),u=l/n);var h=Object(y["a"])(c,a,t.rotate);a=Object(y["d"])(h,r),c=Object(y["a"])(h,a,-t.rotate),s=Object(y["a"])(r,a,-t.rotate),l=c.x-s.x,u=s.y-c.y}l>0&&u>0&&(t.width=Math.round(l),t.height=Math.round(u),t.left=Math.round(s.x),t.top=Math.round(c.y))}function C(t,e,n,o,i){var r=i.symmetricPoint,a=Object(y["d"])(e,r),c=Object(y["a"])(r,a,-t.rotate),s=Object(y["a"])(e,a,-t.rotate),l=s.x-c.x,u=s.y-c.y;if(o){l/u>n?(s.x-=Math.abs(l-u*n),l=u*n):(s.y-=Math.abs(u-l/n),u=l/n);var h=Object(y["a"])(s,a,t.rotate);a=Object(y["d"])(h,r),c=Object(y["a"])(r,a,-t.rotate),s=Object(y["a"])(h,a,-t.rotate),l=s.x-c.x,u=s.y-c.y}l>0&&u>0&&(t.width=Math.round(l),t.height=Math.round(u),t.left=Math.round(c.x),t.top=Math.round(c.y))}function O(t,e,n,o,i){var r=i.symmetricPoint,a=Object(y["d"])(e,r),c=Object(y["a"])(r,a,-t.rotate),s=Object(y["a"])(e,a,-t.rotate),l=c.x-s.x,u=s.y-c.y;if(o){l/u>n?(s.x+=Math.abs(l-u*n),l=u*n):(s.y-=Math.abs(u-l/n),u=l/n);var h=Object(y["a"])(s,a,t.rotate);a=Object(y["d"])(h,r),c=Object(y["a"])(r,a,-t.rotate),s=Object(y["a"])(h,a,-t.rotate),l=c.x-s.x,u=s.y-c.y}l>0&&u>0&&(t.width=Math.round(l),t.height=Math.round(u),t.left=Math.round(s.x),t.top=Math.round(c.y))}function k(t,e,n,o,i){var r=i.symmetricPoint,a=i.curPoint,c=Object(y["a"])(e,a,-t.rotate),s=Object(y["a"])({x:a.x,y:c.y},a,t.rotate),l=Math.sqrt(Math.pow(s.x-r.x,2)+Math.pow(s.y-r.y,2)),u={x:s.x-(s.x-r.x)/2,y:s.y+(r.y-s.y)/2},h=t.width;o&&(h=l*n),t.width=h,t.height=Math.round(l),t.top=Math.round(u.y-l/2),t.left=Math.round(u.x-t.width/2)}function E(t,e,n,o,i){var r=i.symmetricPoint,a=i.curPoint,c=Object(y["a"])(e,a,-t.rotate),s=Object(y["a"])({x:c.x,y:a.y},a,t.rotate),l=Math.sqrt(Math.pow(s.x-r.x,2)+Math.pow(s.y-r.y,2)),u={x:s.x-(s.x-r.x)/2,y:s.y+(r.y-s.y)/2},h=t.height;o&&(h=l/n),t.height=h,t.width=Math.round(l),t.top=Math.round(u.y-t.height/2),t.left=Math.round(u.x-l/2)}function $(t,e,n,o,i){var r=i.symmetricPoint,a=i.curPoint,c=Object(y["a"])(e,a,-t.rotate),s=Object(y["a"])({x:a.x,y:c.y},a,t.rotate),l=Math.sqrt(Math.pow(s.x-r.x,2)+Math.pow(s.y-r.y,2)),u={x:s.x-(s.x-r.x)/2,y:s.y+(r.y-s.y)/2},h=t.width;o&&(h=l*n),t.width=h,t.height=Math.round(l),t.top=Math.round(u.y-l/2),t.left=Math.round(u.x-t.width/2)}function j(t,e,n,o,i){var r=i.symmetricPoint,a=i.curPoint,c=Object(y["a"])(e,a,-t.rotate),s=Object(y["a"])({x:c.x,y:a.y},a,t.rotate),l=Math.sqrt(Math.pow(s.x-r.x,2)+Math.pow(s.y-r.y,2)),u={x:s.x-(s.x-r.x)/2,y:s.y+(r.y-s.y)/2},h=t.height;o&&(h=l/n),t.height=h,t.width=Math.round(l),t.top=Math.round(u.y-t.height/2),t.left=Math.round(u.x-l/2)}function L(t,e,n,o,i,r){w[t](e,n,o,i,r)}var P=n("fa7d"),_={props:{active:{type:Boolean,default:!1},element:{require:!0,type:Object,default:function(){}},defaultStyle:{require:!0,type:Object,default:function(){}},index:{require:!0,type:[Number,String],default:0}},data:function(){return{pointList:["lt","t","rt","r","rb","b","lb","l"],pointList2:["r","l"],initialAngle:{lt:0,t:45,rt:90,r:135,rb:180,b:225,lb:270,l:315},angleToCursor:[{start:338,end:23,cursor:"nw"},{start:23,end:68,cursor:"n"},{start:68,end:113,cursor:"ne"},{start:113,end:158,cursor:"e"},{start:158,end:203,cursor:"se"},{start:203,end:248,cursor:"s"},{start:248,end:293,cursor:"sw"},{start:293,end:338,cursor:"w"}],cursors:{}}},computed:Object(c["b"])(["curComponent","editor"]),mounted:function(){var t=this;this.curComponent&&(this.cursors=this.getCursor()),d["a"].$on("runAnimation",(function(){t.element==t.curComponent&&v(t.$el,t.curComponent.animations)})),d["a"].$on("stopAnimation",(function(){t.$el.classList.remove("animated","infinite")}))},methods:{getPointList:function(){return"line-shape"===this.element.component?this.pointList2:this.pointList},isActive:function(){return this.active&&!this.element.isLock},handleRotate:function(t){var e=this;this.$store.commit("setClickComponentStatus",!0),t.preventDefault(),t.stopPropagation();var n=Object(f["a"])({},this.defaultStyle),o=t.clientY,i=t.clientX,r=n.rotate,a=this.$el.getBoundingClientRect(),c=a.left+a.width/2,s=a.top+a.height/2,l=Math.atan2(o-s,i-c)/(Math.PI/180),u=!1,h=function(t){u=!0;var o=t.clientX,i=t.clientY,a=Math.atan2(i-s,o-c)/(Math.PI/180);n.rotate=r+a-l,e.$store.commit("setShapeStyle",n)},d=function t(){u&&e.$store.commit("recordSnapshot"),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",t),e.cursors=e.getCursor()};document.addEventListener("mousemove",h),document.addEventListener("mouseup",d)},getPointStyle:function(t){var e=this.defaultStyle,n=e.width,o=e.height,i=/t/.test(t),r=/b/.test(t),a=/l/.test(t),c=/r/.test(t),s=0,l=0;2===t.length?(s=a?0:n,l=i?0:o):((i||r)&&(s=n/2,l=i?0:o),(a||c)&&(s=a?0:n,l=Math.floor(o/2)));var u={marginLeft:"-4px",marginTop:"-4px",left:"".concat(s,"px"),top:"".concat(l,"px"),cursor:this.cursors[t]};return u},getCursor:function(){var t=this.angleToCursor,e=this.initialAngle,n=this.pointList,o=this.curComponent,i=Object(y["e"])(o.style.rotate),r={},a=-1;return n.forEach((function(n){var o=Object(y["e"])(e[n]+i),c=t.length;while(1){a=(a+1)%c;var s=t[a];if(o<23||o>=338)return void(r[n]="nw-resize");if(s.start<=o&&o<s.end)return void(r[n]=s.cursor+"-resize")}})),r},handleMouseDownOnShape:function(t){var e=this;if(this.$store.commit("setInEditorStatus",!0),this.$store.commit("setClickComponentStatus",!0),Object(P["c"])(this.element.component)&&t.preventDefault(),t.stopPropagation(),this.$store.commit("setCurComponent",{component:this.element,index:this.index}),!this.element.isLock){this.cursors=this.getCursor();var n=Object(f["a"])({},this.defaultStyle),o=t.clientY,i=t.clientX,r=Number(n.top),a=Number(n.left),c=!1,s=function(t){c=!0;var s=t.clientX,l=t.clientY;n.top=l-o+r,n.left=s-i+a,e.$store.commit("setShapeStyle",n),e.$nextTick((function(){d["a"].$emit("move",l-o>0,s-i>0)}))},l=function t(){c&&e.$store.commit("recordSnapshot"),d["a"].$emit("unmove"),document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",t)};document.addEventListener("mousemove",s),document.addEventListener("mouseup",l)}},selectCurComponent:function(t){t.stopPropagation(),t.preventDefault(),this.$store.commit("hideContextMenu")},handleMouseDownOnPoint:function(t,e){var n=this;this.$store.commit("setInEditorStatus",!0),this.$store.commit("setClickComponentStatus",!0),e.stopPropagation(),e.preventDefault();var o=Object(f["a"])({},this.defaultStyle),i=o.width/o.height,r={x:o.left+o.width/2,y:o.top+o.height/2},a=this.editor.getBoundingClientRect(),c=e.target.getBoundingClientRect(),s={x:Math.round(c.left-a.left+e.target.offsetWidth/2),y:Math.round(c.top-a.top+e.target.offsetHeight/2)},l={x:r.x-(s.x-r.x),y:r.y-(s.y-r.y)},u=!1,h=!0,d=this.isNeedLockProportion(),m=function(e){if(h)h=!1;else{u=!0;var c={x:e.clientX-Math.round(a.left),y:e.clientY-Math.round(a.top)};L(t,o,c,i,d,{center:r,curPoint:s,symmetricPoint:l}),n.$store.commit("setShapeStyle",o)}},p=function t(){document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",t),u&&n.$store.commit("recordSnapshot")};document.addEventListener("mousemove",m),document.addEventListener("mouseup",p)},isNeedLockProportion:function(){if("Group"!=this.element.component)return!1;var t,e=[0,90,180,360],n=h(this.element.propValue);try{for(n.s();!(t=n.n()).done;){var o=t.value;if(!e.includes(Object(y["e"])(parseInt(o.style.rotate))))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}}},D=_,I=(n("7b60"),n("2877")),N=Object(I["a"])(D,s,l,!1,null,"424a0ed6",null),M=N.exports,A=n("a7f7"),T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.menuShow,expression:"menuShow"}],staticClass:"contextmenu",style:{top:t.menuTop+"px",left:t.menuLeft+"px"}},[n("ul",{on:{mouseup:t.handleMouseUp}},[t.curComponent?[t.curComponent.isLock?n("li",{on:{click:t.unlock}},[t._v("解锁")]):[n("li",{on:{click:t.copy}},[t._v("复制")]),n("li",{on:{click:t.paste}},[t._v("粘贴")]),n("li",{on:{click:t.cut}},[t._v("剪切")]),n("li",{on:{click:t.deleteComponent}},[t._v("删除")]),n("li",{on:{click:t.lock}},[t._v("锁定")]),n("li",{on:{click:t.topComponent}},[t._v("置顶")]),n("li",{on:{click:t.bottomComponent}},[t._v("置底")]),n("li",{on:{click:t.upComponent}},[t._v("上移")]),n("li",{on:{click:t.downComponent}},[t._v("下移")])]]:n("li",{on:{click:t.paste}},[t._v("粘贴")])],2)])},R=[],F={data:function(){return{copyData:null}},computed:Object(c["b"])(["menuTop","menuLeft","menuShow","curComponent"]),methods:{lock:function(){this.$store.commit("lock")},unlock:function(){this.$store.commit("unlock")},handleMouseUp:function(){this.$store.commit("setClickComponentStatus",!0)},cut:function(){this.$store.commit("cut")},copy:function(){this.$store.commit("copy")},paste:function(){this.$store.commit("paste",!0),this.$store.commit("recordSnapshot")},deleteComponent:function(){this.$store.commit("deleteComponent"),this.$store.commit("recordSnapshot")},upComponent:function(){this.$store.commit("upComponent"),this.$store.commit("recordSnapshot")},downComponent:function(){this.$store.commit("downComponent"),this.$store.commit("recordSnapshot")},topComponent:function(){this.$store.commit("topComponent"),this.$store.commit("recordSnapshot")},bottomComponent:function(){this.$store.commit("bottomComponent"),this.$store.commit("recordSnapshot")}}},U=F,V=(n("8c51"),Object(I["a"])(U,T,R,!1,null,"ff223a58",null)),G=V.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mark-line"},t._l(t.lines,(function(e){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.lineStatus[e]||!1,expression:"lineStatus[line] || false"}],key:e,ref:e,refInFor:!0,staticClass:"line",class:e.includes("x")?"xline":"yline"})})),0)},X=[],B=(n("b64b"),{data:function(){return{lines:["xt","xc","xb","yl","yc","yr"],diff:3,lineStatus:{xt:!1,xc:!1,xb:!1,yl:!1,yc:!1,yr:!1}}},computed:Object(c["b"])(["curComponent","componentData"]),mounted:function(){var t=this;d["a"].$on("move",(function(e,n){t.showLine(e,n)})),d["a"].$on("unmove",(function(){t.hideLine()}))},methods:{hideLine:function(){var t=this;Object.keys(this.lineStatus).forEach((function(e){t.lineStatus[e]=!1}))},showLine:function(t,e){var n=this,o=this.$refs,i=this.componentData,r=Object(A["c"])(this.curComponent.style),a=r.width/2,c=r.height/2;this.hideLine(),i.forEach((function(i){if(i!=n.curComponent){var s=Object(A["c"])(i.style),l=s.top,u=s.left,h=s.bottom,f=s.right,d=s.width/2,m=s.height/2,p={top:[{isNearly:n.isNearly(r.top,l),lineNode:o.xt[0],line:"xt",dragShift:l,lineShift:l},{isNearly:n.isNearly(r.bottom,l),lineNode:o.xt[0],line:"xt",dragShift:l-r.height,lineShift:l},{isNearly:n.isNearly(r.top+c,l+m),lineNode:o.xc[0],line:"xc",dragShift:l+m-c,lineShift:l+m},{isNearly:n.isNearly(r.top,h),lineNode:o.xb[0],line:"xb",dragShift:h,lineShift:h},{isNearly:n.isNearly(r.bottom,h),lineNode:o.xb[0],line:"xb",dragShift:h-r.height,lineShift:h}],left:[{isNearly:n.isNearly(r.left,u),lineNode:o.yl[0],line:"yl",dragShift:u,lineShift:u},{isNearly:n.isNearly(r.right,u),lineNode:o.yl[0],line:"yl",dragShift:u-r.width,lineShift:u},{isNearly:n.isNearly(r.left+a,u+d),lineNode:o.yc[0],line:"yc",dragShift:u+d-a,lineShift:u+d},{isNearly:n.isNearly(r.left,f),lineNode:o.yr[0],line:"yr",dragShift:f,lineShift:f},{isNearly:n.isNearly(r.right,f),lineNode:o.yr[0],line:"yr",dragShift:f-r.width,lineShift:f}]},v=[],g=n.curComponent.style.rotate;Object.keys(p).forEach((function(t){p[t].forEach((function(e){e.isNearly&&(n.$store.commit("setShapeSingleStyle",{key:t,value:0!=g?n.translatecurComponentShift(t,e,r):e.dragShift}),e.lineNode.style[t]="".concat(e.lineShift,"px"),v.push(e.line))}))})),v.length&&n.chooseTheTureLine(v,t,e)}}))},translatecurComponentShift:function(t,e,n){var o=this.curComponent.style,i=o.width,r=o.height;return"top"==t?Math.round(e.dragShift-(r-n.height)/2):Math.round(e.dragShift-(i-n.width)/2)},chooseTheTureLine:function(t,e,n){n?t.includes("yr")?this.lineStatus.yr=!0:t.includes("yc")?this.lineStatus.yc=!0:t.includes("yl")&&(this.lineStatus.yl=!0):t.includes("yl")?this.lineStatus.yl=!0:t.includes("yc")?this.lineStatus.yc=!0:t.includes("yr")&&(this.lineStatus.yr=!0),e?t.includes("xb")?this.lineStatus.xb=!0:t.includes("xc")?this.lineStatus.xc=!0:t.includes("xt")&&(this.lineStatus.xt=!0):t.includes("xt")?this.lineStatus.xt=!0:t.includes("xc")?this.lineStatus.xc=!0:t.includes("xb")&&(this.lineStatus.xb=!0)},isNearly:function(t,e){return Math.abs(t-e)<=this.diff}}}),z=B,H=(n("4e72"),Object(I["a"])(z,Y,X,!1,null,"475239c0",null)),W=H.exports,q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"area",style:{left:t.start.x+"px",top:t.start.y+"px",width:t.width+"px",height:t.height+"px"}})},J=[],K={props:{start:{type:Object,default:function(){}},width:{type:Number,default:0},height:{type:Number,default:0}}},Q=K,Z=(n("7e6f"),Object(I["a"])(Q,q,J,!1,null,"30e7b1c2",null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{staticClass:"grid",attrs:{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"}},[n("defs",[n("pattern",{attrs:{id:"smallGrid",width:"7.236328125",height:"7.236328125",patternUnits:"userSpaceOnUse"}},[n("path",{attrs:{d:"M 7.236328125 0 L 0 0 0 7.236328125",fill:"none",stroke:"rgba(207, 207, 207, 0.3)","stroke-width":"1"}})]),n("pattern",{attrs:{id:"grid",width:"36.181640625",height:"36.181640625",patternUnits:"userSpaceOnUse"}},[n("rect",{attrs:{width:"36.181640625",height:"36.181640625",fill:"url(#smallGrid)"}}),n("path",{attrs:{d:"M 36.181640625 0 L 0 0 0 36.181640625",fill:"none",stroke:"rgba(186, 186, 186, 0.5)","stroke-width":"1"}})])]),n("rect",{attrs:{width:"100%",height:"100%",fill:"url(#grid)"}})])},nt=[],ot=(n("5fc1"),{}),it=Object(I["a"])(ot,et,nt,!1,null,"39ef9482",null),rt=it.exports,at={components:{Shape:M,ContextMenu:G,MarkLine:W,Area:tt,Grid:rt},props:{isEdit:{type:Boolean,default:!0}},data:function(){return{editorX:0,editorY:0,start:{x:0,y:0},width:0,height:0,isShowArea:!1,svgFilterAttrs:["width","height","top","left","rotate"]}},computed:Object(c["b"])(["componentData","curComponent","canvasStyleData","editor"]),mounted:function(){var t=this;this.$store.commit("getEditor"),d["a"].$on("hideArea",(function(){t.hideArea()}))},methods:{getShapeStyle:A["e"],getCanvasStyle:A["b"],changeStyleWithScale:y["b"],handleMouseDown:function(t){var e=this;this.curComponent&&!Object(P["c"])(this.curComponent.component)||t.preventDefault(),this.hideArea();var n=this.editor.getBoundingClientRect();this.editorX=n.x,this.editorY=n.y;var o=t.clientX,i=t.clientY;this.start.x=o-this.editorX,this.start.y=i-this.editorY,this.isShowArea=!0;var r=function(t){e.width=Math.abs(t.clientX-o),e.height=Math.abs(t.clientY-i),t.clientX<o&&(e.start.x=t.clientX-e.editorX),t.clientY<i&&(e.start.y=t.clientY-e.editorY)},a=function t(n){document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",t),n.clientX!=o||n.clientY!=i?e.createGroup():e.hideArea()};document.addEventListener("mousemove",r),document.addEventListener("mouseup",a)},hideArea:function(){this.isShowArea=0,this.width=0,this.height=0,this.$store.commit("setAreaData",{style:{left:0,top:0,width:0,height:0},components:[]})},createGroup:function(){var t=this,e=this.getSelectArea();if(e.length<=1)this.hideArea();else{var n=1/0,o=1/0,i=-1/0,r=-1/0;e.forEach((function(e){var a={};"Group"==e.component?e.propValue.forEach((function(e){var c=Object(P["a"])("#component".concat(e.id)).getBoundingClientRect();a.left=c.left-t.editorX,a.top=c.top-t.editorY,a.right=c.right-t.editorX,a.bottom=c.bottom-t.editorY,a.left<o&&(o=a.left),a.top<n&&(n=a.top),a.right>i&&(i=a.right),a.bottom>r&&(r=a.bottom)})):a=Object(A["c"])(e.style),a.left<o&&(o=a.left),a.top<n&&(n=a.top),a.right>i&&(i=a.right),a.bottom>r&&(r=a.bottom)})),this.start.x=o,this.start.y=n,this.width=i-o,this.height=r-n,this.$store.commit("setAreaData",{style:{left:o,top:n,width:this.width,height:this.height},components:e})}},getSelectArea:function(){var t=this,e=[],n=this.start,o=n.x,i=n.y;return this.componentData.forEach((function(n){if(!n.isLock){var r=Object(A["c"])(n.style),a=r.left,c=r.top,s=r.width,l=r.height;o<=a&&i<=c&&a+s<=o+t.width&&c+l<=i+t.height&&e.push(n)}})),e},handleContextMenu:function(t){t.stopPropagation(),t.preventDefault();var e=t.target,n=t.offsetY,o=t.offsetX;while(e instanceof SVGElement)e=e.parentNode;while(!e.className.includes("editor"))o+=e.offsetLeft,n+=e.offsetTop,e=e.parentNode;this.$store.commit("showContextMenu",{top:n,left:o})},getComponentStyle:function(t){return Object(A["f"])(t,this.svgFilterAttrs)},getSVGStyle:function(t){return Object(A["d"])(t,this.svgFilterAttrs)},handleInput:function(t,e){this.$store.commit("setShapeStyle",{height:this.getTextareaHeight(t,e)})},getTextareaHeight:function(t,e){var n=t.style,o=n.lineHeight,i=n.fontSize,r=n.height;""===o&&(o=1.5);var a=(e.split("<br>").length-1)*o*i;return r>a?r:a}}},ct=at,st=(n("2a98"),Object(I["a"])(ct,r,a,!1,null,"2720219c",null)),lt=st.exports,ut=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"component-list",on:{dragstart:t.handleDragStart}},t._l(t.componentList,(function(t,e){return n("div",{key:e,staticClass:"list",attrs:{draggable:"","data-index":e}},[n("span",{staticClass:"iconfont",class:"icon-"+t.icon})])})),0)},ht=[],ft=n("4e67"),dt={data:function(){return{componentList:ft["c"]}},methods:{handleDragStart:function(t){t.dataTransfer.setData("index",t.target.dataset.index)}}},mt=dt,pt=(n("0898"),Object(I["a"])(mt,ut,ht,!1,null,"44a63792",null)),vt=pt.exports,gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"animation-list"},[n("div",{staticClass:"div-animation"},[n("el-button",{on:{click:function(e){t.isShowAnimation=!0}}},[t._v("添加动画")]),n("el-button",{on:{click:t.previewAnimate}},[t._v("预览动画")]),n("div",t._l(t.curComponent.animations,(function(e,o){return n("el-tag",{key:o,attrs:{closable:""},on:{close:function(e){return t.removeAnimation(o)}}},[t._v(" "+t._s(e.label)+" "),n("i",{staticClass:"cursor el-icon-setting",on:{click:function(e){return t.handleAnimationSetting(o)}}})])})),1)],1),n("Modal",{model:{value:t.isShowAnimation,callback:function(e){t.isShowAnimation=e},expression:"isShowAnimation"}},[n("el-tabs",{model:{value:t.animationActiveName,callback:function(e){t.animationActiveName=e},expression:"animationActiveName"}},t._l(t.animationClassData,(function(e){return n("el-tab-pane",{key:e.label,attrs:{label:e.label,name:e.label}},[n("el-scrollbar",{staticClass:"animate-container"},t._l(e.children,(function(e){return n("div",{key:e.value,ref:e.value,refInFor:!0,staticClass:"animate",on:{mouseenter:function(n){return t.runAnimation(e)},click:function(n){return t.addAnimation(e)}}},[n("div",[t._v(" "+t._s(e.label)+" ")])])})),0)],1)})),1)],1),t.isShowAnimationSetting?n("AnimationSettingModal",{attrs:{"cur-index":t.curIndex},on:{close:function(e){t.isShowAnimationSetting=!1}}}):t._e()],1)},bt=[],yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("div",{staticClass:"modal-bg",on:{click:t.hide}},[n("div",{staticClass:"fadeInLeft animated modal",on:{click:t.stopPropagation}},[t._t("default")],2)]):t._e()},wt=[],xt={model:{prop:"show",event:"change"},props:{show:{type:Boolean,default:!1}},methods:{hide:function(){this.$emit("change")},stopPropagation:function(t){t.stopPropagation()}}},St=xt,Ct=(n("a0db"),Object(I["a"])(St,yt,wt,!1,null,"057883e4",null)),Ot=Ct.exports,kt=[{label:"进入",children:[{label:"渐显",value:"fadeIn"},{label:"向右进入",value:"fadeInLeft"},{label:"向左进入",value:"fadeInRight"},{label:"向上进入",value:"fadeInUp"},{label:"向下进入",value:"fadeInDown"},{label:"向右长距进入",value:"fadeInLeftBig"},{label:"向左长距进入",value:"fadeInRightBig"},{label:"向上长距进入",value:"fadeInUpBig"},{label:"向下长距进入",value:"fadeInDownBig"},{label:"旋转进入",value:"rotateIn"},{label:"左顺时针旋转",value:"rotateInDownLeft"},{label:"右逆时针旋转",value:"rotateInDownRight"},{label:"左逆时针旋转",value:"rotateInUpLeft"},{label:"右逆时针旋转",value:"rotateInUpRight"},{label:"弹入",value:"bounceIn"},{label:"向右弹入",value:"bounceInLeft"},{label:"向左弹入",value:"bounceInRight"},{label:"向上弹入",value:"bounceInUp"},{label:"向下弹入",value:"bounceInDown"},{label:"光速从右进入",value:"lightSpeedIn"},{label:"光速从右退出",value:"lightSpeedOut"},{label:"中心X轴旋转",value:"flipInX"},{label:"中心Y轴旋转",value:"flipInY"},{label:"左长半径旋转",value:"rollIn"},{label:"由小变大进入",value:"zoomIn"},{label:"左变大进入",value:"zoomInLeft"},{label:"右变大进入",value:"zoomInRight"},{label:"向上变大进入",value:"zoomInUp"},{label:"向下变大进入",value:"zoomInDown"},{label:"向右滑动展开",value:"slideInLeft"},{label:"向左滑动展开",value:"slideInRight"},{label:"向上滑动展开",value:"slideInUp"},{label:"向下滑动展开",value:"slideInDown"}]},{label:"强调",children:[{label:"弹跳",value:"bounce"},{label:"闪烁",value:"flash"},{label:"放大缩小",value:"pulse"},{label:"放大缩小弹簧",value:"rubberBand"},{label:"左右晃动",value:"headShake"},{label:"左右扇形摇摆",value:"swing"},{label:"放大晃动缩小",value:"tada"},{label:"扇形摇摆",value:"wobble"},{label:"左右上下晃动",value:"jello"},{label:"Y轴旋转",value:"flip"}]},{label:"退出",children:[{label:"渐隐",value:"fadeOut"},{label:"向左退出",value:"fadeOutLeft"},{label:"向右退出",value:"fadeOutRight"},{label:"向上退出",value:"fadeOutUp"},{label:"向下退出",value:"fadeOutDown"},{label:"向左长距退出",value:"fadeOutLeftBig"},{label:"向右长距退出",value:"fadeOutRightBig"},{label:"向上长距退出",value:"fadeOutUpBig"},{label:"向下长距退出",value:"fadeOutDownBig"},{label:"旋转退出",value:"rotateOut"},{label:"左顺时针旋转",value:"rotateOutDownLeft"},{label:"右逆时针旋转",value:"rotateOutDownRight"},{label:"左逆时针旋转",value:"rotateOutUpLeft"},{label:"右逆时针旋转",value:"rotateOutUpRight"},{label:"弹出",value:"bounceOut"},{label:"向左弹出",value:"bounceOutLeft"},{label:"向右弹出",value:"bounceOutRight"},{label:"向上弹出",value:"bounceOutUp"},{label:"向下弹出",value:"bounceOutDown"},{label:"中心X轴旋转",value:"flipOutX"},{label:"中心Y轴旋转",value:"flipOutY"},{label:"左长半径旋转",value:"rollOut"},{label:"由小变大退出",value:"zoomOut"},{label:"左变大退出",value:"zoomOutLeft"},{label:"右变大退出",value:"zoomOutRight"},{label:"向上变大退出",value:"zoomOutUp"},{label:"向下变大退出",value:"zoomOutDown"},{label:"向左滑动收起",value:"slideOutLeft"},{label:"向右滑动收起",value:"slideOutRight"},{label:"向上滑动收起",value:"slideOutUp"},{label:"向下滑动收起",value:"slideOutDown"}]}];kt.forEach((function(t){t.children.forEach((function(t){t.pending=!1,t.animationTime=1}))}));var Et=kt,$t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.config.label+" 动画配置",visible:t.centerDialogVisible,width:"30%",center:""},on:{close:t.handleCloseModal}},[n("div",{staticClass:"time"},[t._v(" 动画时长："),n("el-input-number",{attrs:{"controls-position":"right",min:.1,precision:2,step:.01},model:{value:t.config.animationTime,callback:function(e){t.$set(t.config,"animationTime",e)},expression:"config.animationTime"}})],1),n("div",{staticClass:"loop"},[t._v(" 是否循环："),n("el-switch",{attrs:{"active-text":"是","inactive-text":"否",disabled:t.isDisabled},model:{value:t.config.isLoop,callback:function(e){t.$set(t.config,"isLoop",e)},expression:"config.isLoop"}})],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.handleCloseModal}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.handleSaveSetting}},[t._v("确 定")])],1)])},jt=[],Lt={name:"AnimationSettingModal",props:{curIndex:{type:Number,default:0}},data:function(){return{centerDialogVisible:!0,config:{}}},computed:Object(f["a"])(Object(f["a"])({},Object(c["b"])(["curComponent"])),{},{isDisabled:function(){return this.curComponent.animations.length>1}}),created:function(){var t=this.curComponent.animations[this.curIndex]||{},e=t.label,n=t.animationTime,o=t.isLoop,i=void 0!==o&&o,r=t.value;this.config={animationTime:n,label:e,isLoop:i,value:r}},methods:{handleCloseModal:function(){this.$emit("close")},handleSaveSetting:function(){var t=this.config.isLoop;this.$store.commit("alterAnimation",{index:this.curIndex,data:{animationTime:this.config.animationTime,isLoop:t}}),d["a"].$emit("stopAnimation"),this.handleCloseModal()}}},Pt=Lt,_t=(n("6637"),Object(I["a"])(Pt,$t,jt,!1,null,"043aa3fa",null)),Dt=_t.exports,It={components:{Modal:Ot,AnimationSettingModal:Dt},data:function(){return{isShowAnimation:!1,hoverPreviewAnimate:"",animationActiveName:"进入",animationClassData:Et,showAnimatePanel:!1,timer:null,isShowAnimationSetting:!1,curIndex:0}},computed:Object(c["b"])(["curComponent"]),methods:{addAnimation:function(t){this.$store.commit("addAnimation",t),this.isShowAnimation=!1},previewAnimate:function(){d["a"].$emit("runAnimation")},removeAnimation:function(t){this.$store.commit("removeAnimation",t),this.curComponent.animations.length||d["a"].$emit("stopAnimation")},handleAnimationSetting:function(t){this.isShowAnimationSetting=!0,this.curIndex=t},runAnimation:function(t){var e=this;return p(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!t.pending){n.next=2;break}return n.abrupt("return");case 2:return t.pending=!0,n.next=5,v(e.$refs[t.value][0],[t]);case 5:setTimeout((function(){t.pending=!1}),100);case 6:case"end":return n.stop()}}),n)})))()}}},Nt=It,Mt=(n("e285"),Object(I["a"])(Nt,gt,bt,!1,null,null,null)),At=Mt.exports,Tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"event-list"},[n("div",{staticClass:"div-events"},[n("el-button",{on:{click:function(e){t.isShowEvent=!0}}},[t._v("添加事件")]),n("div",t._l(Object.keys(t.curComponent.events),(function(e){return n("el-tag",{key:e,attrs:{closable:""},on:{close:function(n){return t.removeEvent(e)}}},[t._v(" "+t._s(e)+" ")])})),1)],1),n("Modal",{model:{value:t.isShowEvent,callback:function(e){t.isShowEvent=e},expression:"isShowEvent"}},[n("el-tabs",{model:{value:t.eventActiveName,callback:function(e){t.eventActiveName=e},expression:"eventActiveName"}},t._l(t.eventList,(function(e){return n("el-tab-pane",{key:e.key,staticStyle:{padding:"0 20px"},attrs:{label:e.label,name:e.key}},["redirect"==e.key?n("el-input",{attrs:{type:"textarea",placeholder:"请输入完整的 URL"},nativeOn:{keydown:function(t){t.stopPropagation()}},model:{value:e.param,callback:function(n){t.$set(e,"param",n)},expression:"item.param"}}):t._e(),"alert"==e.key?n("el-input",{attrs:{type:"textarea",placeholder:"请输入要 alert 的内容"},nativeOn:{keydown:function(t){t.stopPropagation()}},model:{value:e.param,callback:function(n){t.$set(e,"param",n)},expression:"item.param"}}):t._e(),n("el-button",{staticStyle:{"margin-top":"20px"},on:{click:function(n){return t.addEvent(e.key,e.param)}}},[t._v("确定")])],1)})),1)],1)],1)},Rt=[],Ft=(n("25f0"),{redirect:function(t){t&&(window.location.href=t)},alert:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){t&&alert(t)}))}),Ut={methods:Ft},Vt=[{key:"redirect",label:"跳转事件",event:Ft.redirect,param:""},{key:"alert",label:"alert 事件",event:Ft.alert,param:""}],Gt={components:{Modal:Ot},data:function(){return{isShowEvent:!1,eventURL:"",eventActiveName:"redirect",eventList:Vt}},computed:Object(c["b"])(["curComponent"]),methods:{addEvent:function(t,e){this.isShowEvent=!1,this.$store.commit("addEvent",{event:t,param:e})},removeEvent:function(t){this.$store.commit("removeEvent",t)}}},Yt=Gt,Xt=(n("8cab"),Object(I["a"])(Yt,Tt,Rt,!1,null,"07377f5c",null)),Bt=Xt.exports,zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"toolbar"},[n("el-button",{on:{click:t.undo}},[t._v("撤消")]),n("el-button",{on:{click:t.redo}},[t._v("重做")]),n("label",{staticClass:"insert",attrs:{for:"input"}},[t._v("插入图片")]),n("input",{attrs:{id:"input",type:"file",hidden:""},on:{change:t.handleFileChange}}),n("el-button",{staticStyle:{"margin-left":"10px"},on:{click:function(e){return t.preview(!1)}}},[t._v("预览")]),n("el-button",{on:{click:t.save}},[t._v("保存")]),n("el-button",{on:{click:t.clearCanvas}},[t._v("清空画布")]),n("el-button",{attrs:{disabled:!t.areaData.components.length},on:{click:t.compose}},[t._v("组合")]),n("el-button",{attrs:{disabled:!t.curComponent||t.curComponent.isLock||"Group"!=t.curComponent.component},on:{click:t.decompose}},[t._v(" 拆分 ")]),n("el-button",{attrs:{disabled:!t.curComponent||t.curComponent.isLock},on:{click:t.lock}},[t._v("锁定")]),n("el-button",{attrs:{disabled:!t.curComponent||!t.curComponent.isLock},on:{click:t.unlock}},[t._v("解锁")]),n("el-button",{on:{click:function(e){return t.preview(!0)}}},[t._v("截图")]),n("div",{staticClass:"canvas-config"},[n("span",[t._v("画布大小")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.canvasStyleData.width,expression:"canvasStyleData.width"}],domProps:{value:t.canvasStyleData.width},on:{input:function(e){e.target.composing||t.$set(t.canvasStyleData,"width",e.target.value)}}}),n("span",[t._v("*")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.canvasStyleData.height,expression:"canvasStyleData.height"}],domProps:{value:t.canvasStyleData.height},on:{input:function(e){e.target.composing||t.$set(t.canvasStyleData,"height",e.target.value)}}})]),n("div",{staticClass:"canvas-config"},[n("span",[t._v("画布比例")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.scale,expression:"scale"}],domProps:{value:t.scale},on:{input:[function(e){e.target.composing||(t.scale=e.target.value)},t.handleScaleChange]}}),t._v(" % ")])],1),n("Preview",{attrs:{"is-screenshot":t.isScreenshot},on:{change:t.handlePreviewChange},model:{value:t.isShowPreview,callback:function(e){t.isShowPreview=e},expression:"isShowPreview"}})],1)},Ht=[],Wt=(n("e9c4"),n("ac24")),qt=n("eae4"),Jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.show?n("div",{ref:"container",staticClass:"bg"},[t.isScreenshot?n("el-button",{staticClass:"close",on:{click:t.htmlToImage}},[t._v("确定")]):n("el-button",{staticClass:"close",on:{click:t.close}},[t._v("关闭")]),n("div",{staticClass:"canvas-container"},[n("div",{staticClass:"canvas",style:Object.assign({},t.getCanvasStyle(t.canvasStyleData),{width:t.changeStyleWithScale(t.canvasStyleData.width)+"px",height:t.changeStyleWithScale(t.canvasStyleData.height)+"px"})},t._l(t.componentData,(function(t,e){return n("ComponentWrapper",{key:e,attrs:{config:t}})})),1)])],1):t._e()},Kt=[],Qt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{on:{click:t.handleClick}},[t.config.component.startsWith("SVG")?n(t.config.component,{ref:"component",tag:"component",staticClass:"component",style:t.getSVGStyle(t.config.style),attrs:{"prop-value":t.config.propValue,element:t.config}}):n(t.config.component,{ref:"component",tag:"component",staticClass:"component",style:t.getStyle(t.config.style),attrs:{"prop-value":t.config.propValue,element:t.config}})],1)},Zt=[],te={mixins:[Ut],props:{config:{type:Object,require:!0,default:function(){}}},mounted:function(){v(this.$refs.component.$el,this.config.animations)},methods:{getStyle:A["f"],getSVGStyle:A["d"],handleClick:function(){var t=this,e=this.config.events;Object.keys(e).forEach((function(n){t[n](e[n])}))}}},ee=te,ne=(n("6dc2"),Object(I["a"])(ee,Qt,Zt,!1,null,"b379b678",null)),oe=ne.exports,ie=function(t,e,n,o){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,r){function a(t){try{s(o.next(t))}catch(e){r(e)}}function c(t){try{s(o["throw"](t))}catch(e){r(e)}}function s(t){t.done?n(t.value):i(t.value).then(a,c)}s((o=o.apply(t,e||[])).next())}))};const re="application/font-woff",ae="image/jpeg",ce={woff:re,woff2:re,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:ae,jpeg:ae,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"};function se(t){const e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function le(t){const e=se(t).toLowerCase();return ce[e]||""}function ue(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;const n=document.implementation.createHTMLDocument(),o=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(o),n.body.appendChild(i),e&&(o.href=e),i.href=t,i.href}function he(t){return-1!==t.search(/^(data:)/)}function fe(t,e){return`data:${e};base64,${t}`}function de(t){return t.split(/,/)[1]}const me=function(){let t=0;const e=()=>("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4);return()=>(t+=1,`u${e()}${t}`)}();function pe(t){const e=[];for(let n=0,o=t.length;n<o;n+=1)e.push(t[n]);return e}function ve(t,e){const n=window.getComputedStyle(t).getPropertyValue(e);return parseFloat(n.replace("px",""))}function ge(t){const e=ve(t,"border-left-width"),n=ve(t,"border-right-width");return t.clientWidth+e+n}function be(t){const e=ve(t,"border-top-width"),n=ve(t,"border-bottom-width");return t.clientHeight+e+n}function ye(){let t,e;try{e=process}catch(o){}const n=e&&e.env?e.env.devicePixelRatio:null;return n&&(t=parseInt(n,10),Number.isNaN(t)&&(t=1)),t||window.devicePixelRatio||1}function we(t){return new Promise((e,n)=>{const o=new Image;o.onload=()=>e(o),o.onerror=n,o.crossOrigin="anonymous",o.decoding="sync",o.src=t})}function xe(t){return ie(this,void 0,void 0,(function*(){return Promise.resolve().then(()=>(new XMLSerializer).serializeToString(t)).then(encodeURIComponent).then(t=>"data:image/svg+xml;charset=utf-8,"+t)}))}function Se(t,e,n){return ie(this,void 0,void 0,(function*(){const o="http://www.w3.org/2000/svg",i=document.createElementNS(o,"svg"),r=document.createElementNS(o,"foreignObject");return i.setAttribute("width",""+e),i.setAttribute("height",""+n),i.setAttribute("viewBox",`0 0 ${e} ${n}`),r.setAttribute("width","100%"),r.setAttribute("height","100%"),r.setAttribute("x","0"),r.setAttribute("y","0"),r.setAttribute("externalResourcesRequired","true"),i.appendChild(r),r.appendChild(t),xe(i)}))}const Ce={};function Oe(t){let e=t.replace(/\?.*/,"");return/ttf|otf|eot|woff2?/i.test(e)&&(e=e.replace(/.*\//,"")),e}function ke(t,e){const n=Oe(t);if(null!=Ce[n])return Ce[n];e.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+(new Date).getTime());const o=n=>{let o="";if(e.imagePlaceholder){const t=e.imagePlaceholder.split(/,/);t&&t[1]&&(o=t[1])}let i="Failed to fetch resource: "+t;return n&&(i="string"===typeof n?n:n.message),i&&console.error(i),{blob:o,contentType:""}},i=window.fetch(t).then(t=>t.blob().then(e=>({blob:e,contentType:t.headers.get("Content-Type")||""}))).then(({blob:t,contentType:e})=>new Promise((n,o)=>{const i=new FileReader;i.onloadend=()=>n({contentType:e,blob:i.result}),i.onerror=o,i.readAsDataURL(t)})).then(({blob:t,contentType:e})=>({contentType:e,blob:de(t)})).catch(o);return Ce[n]=i,i}function Ee(t){const e=t.getPropertyValue("content");return`${t.cssText} content: '${e.replace(/'|"/g,"")}';`}function $e(t){return pe(t).map(e=>{const n=t.getPropertyValue(e),o=t.getPropertyPriority(e);return`${e}: ${n}${o?" !important":""};`}).join(" ")}function je(t,e,n){const o=`.${t}:${e}`,i=n.cssText?Ee(n):$e(n);return document.createTextNode(`${o}{${i}}`)}function Le(t,e,n){const o=window.getComputedStyle(t,n),i=o.getPropertyValue("content");if(""===i||"none"===i)return;const r=me();try{e.className=`${e.className} ${r}`}catch(c){return}const a=document.createElement("style");a.appendChild(je(r,n,o)),e.appendChild(a)}function Pe(t,e){Le(t,e,":before"),Le(t,e,":after")}var _e=function(t,e,n,o){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,r){function a(t){try{s(o.next(t))}catch(e){r(e)}}function c(t){try{s(o["throw"](t))}catch(e){r(e)}}function s(t){t.done?n(t.value):i(t.value).then(a,c)}s((o=o.apply(t,e||[])).next())}))};function De(t){return _e(this,void 0,void 0,(function*(){const e=t.toDataURL();return"data:,"===e?Promise.resolve(t.cloneNode(!1)):we(e)}))}function Ie(t,e){return _e(this,void 0,void 0,(function*(){return Promise.resolve(t.poster).then(t=>ke(t,e)).then(e=>fe(e.blob,le(t.poster)||e.contentType)).then(t=>we(t))}))}function Ne(t,e){return _e(this,void 0,void 0,(function*(){return t instanceof HTMLCanvasElement?De(t):t instanceof HTMLVideoElement&&t.poster?Ie(t,e):Promise.resolve(t.cloneNode(!1))}))}const Me=t=>null!=t.tagName&&"SLOT"===t.tagName.toUpperCase();function Ae(t,e,n){var o;return _e(this,void 0,void 0,(function*(){const i=Me(t)&&t.assignedNodes?pe(t.assignedNodes()):pe((null!==(o=t.shadowRoot)&&void 0!==o?o:t).childNodes);return 0===i.length||t instanceof HTMLVideoElement?Promise.resolve(e):i.reduce((t,o)=>t.then(()=>Ue(o,n)).then(t=>{t&&e.appendChild(t)}),Promise.resolve()).then(()=>e)}))}function Te(t,e){const n=window.getComputedStyle(t),o=e.style;o&&(n.cssText?o.cssText=n.cssText:pe(n).forEach(t=>{o.setProperty(t,n.getPropertyValue(t),n.getPropertyPriority(t))}))}function Re(t,e){t instanceof HTMLTextAreaElement&&(e.innerHTML=t.value),t instanceof HTMLInputElement&&e.setAttribute("value",t.value)}function Fe(t,e){return _e(this,void 0,void 0,(function*(){return e instanceof Element?Promise.resolve().then(()=>Te(t,e)).then(()=>Pe(t,e)).then(()=>Re(t,e)).then(()=>e):Promise.resolve(e)}))}function Ue(t,e,n){return _e(this,void 0,void 0,(function*(){return n||!e.filter||e.filter(t)?Promise.resolve(t).then(t=>Ne(t,e)).then(n=>Ae(t,n,e)).then(e=>Fe(t,e)):Promise.resolve(null)}))}var Ve=function(t,e,n,o){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,r){function a(t){try{s(o.next(t))}catch(e){r(e)}}function c(t){try{s(o["throw"](t))}catch(e){r(e)}}function s(t){t.done?n(t.value):i(t.value).then(a,c)}s((o=o.apply(t,e||[])).next())}))};const Ge=/url\((['"]?)([^'"]+?)\1\)/g,Ye=/url\([^)]+\)\s*format\((["'])([^"']+)\1\)/g,Xe=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Be(t){const e=t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${e})(['"]?\\))`,"g")}function ze(t){const e=[];return t.replace(Ge,(t,n,o)=>(e.push(o),t)),e.filter(t=>!he(t))}function He(t,e,n,o,i){const r=n?ue(e,n):e;return Promise.resolve(r).then(t=>i?i(t):ke(t,o)).then(t=>"string"===typeof t?fe(t,le(e)):fe(t.blob,le(e)||t.contentType)).then(n=>t.replace(Be(e),`$1${n}$3`)).then(t=>t,()=>r)}function We(t,{preferredFontFormat:e}){return e?t.replace(Xe,t=>{while(1){const[n,,o]=Ye.exec(t)||[];if(!o)return"";if(o===e)return`src: ${n};`}}):t}function qe(t){return-1!==t.search(Ge)}function Je(t,e,n){return Ve(this,void 0,void 0,(function*(){if(!qe(t))return Promise.resolve(t);const o=We(t,n);return Promise.resolve(o).then(ze).then(t=>t.reduce((t,o)=>t.then(t=>He(t,o,e,n)),Promise.resolve(o)))}))}var Ke=function(t,e,n,o){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,r){function a(t){try{s(o.next(t))}catch(e){r(e)}}function c(t){try{s(o["throw"](t))}catch(e){r(e)}}function s(t){t.done?n(t.value):i(t.value).then(a,c)}s((o=o.apply(t,e||[])).next())}))};function Qe(t,e){var n;return Ke(this,void 0,void 0,(function*(){const o=null===(n=t.style)||void 0===n?void 0:n.getPropertyValue("background");return o?Promise.resolve(o).then(t=>Je(t,null,e)).then(e=>(t.style.setProperty("background",e,t.style.getPropertyPriority("background")),t)):Promise.resolve(t)}))}function Ze(t,e){return Ke(this,void 0,void 0,(function*(){if((!(t instanceof HTMLImageElement)||he(t.src))&&(!(t instanceof SVGImageElement)||he(t.href.baseVal)))return Promise.resolve(t);const n=t instanceof HTMLImageElement?t.src:t.href.baseVal;return Promise.resolve(n).then(t=>ke(t,e)).then(t=>fe(t.blob,le(n)||t.contentType)).then(e=>new Promise((n,o)=>{t.onload=n,t.onerror=o,t instanceof HTMLImageElement?(t.srcset="",t.src=e):t.href.baseVal=e})).then(()=>t,()=>t)}))}function tn(t,e){return Ke(this,void 0,void 0,(function*(){const n=pe(t.childNodes),o=n.map(t=>en(t,e));return Promise.all(o).then(()=>t)}))}function en(t,e){return Ke(this,void 0,void 0,(function*(){return t instanceof Element?Promise.resolve(t).then(t=>Qe(t,e)).then(t=>Ze(t,e)).then(t=>tn(t,e)):Promise.resolve(t)}))}function nn(t,e){const{style:n}=t;e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=e.width+"px"),e.height&&(n.height=e.height+"px");const o=e.style;return null!=o&&Object.keys(o).forEach(t=>{n[t]=o[t]}),t}var on=function(t,e,n,o){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,r){function a(t){try{s(o.next(t))}catch(e){r(e)}}function c(t){try{s(o["throw"](t))}catch(e){r(e)}}function s(t){t.done?n(t.value):i(t.value).then(a,c)}s((o=o.apply(t,e||[])).next())}))};const rn={};function an(t){const e=rn[t];if(null!=e)return e;const n=window.fetch(t).then(e=>({url:t,cssText:e.text()}));return rn[t]=n,n}function cn(t){return on(this,void 0,void 0,(function*(){return t.cssText.then(e=>{let n=e;const o=/url\(["']?([^"')]+)["']?\)/g,i=n.match(/url\([^)]+\)/g)||[],r=i.map(e=>{let i=e.replace(o,"$1");return i.startsWith("https://")||(i=new URL(i,t.url).href),window.fetch(i).then(t=>t.blob()).then(t=>new Promise((o,i)=>{const r=new FileReader;r.onloadend=()=>{n=n.replace(e,`url(${r.result})`),o([e,r.result])},r.onerror=i,r.readAsDataURL(t)}))});return Promise.all(r).then(()=>n)})}))}function sn(t){if(null==t)return[];const e=[],n=/(\/\*[\s\S]*?\*\/)/gi;let o=t.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");while(1){const t=i.exec(o);if(null===t)break;e.push(t[0])}o=o.replace(i,"");const r=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,a="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",c=new RegExp(a,"gi");while(1){let t=r.exec(o);if(null===t){if(t=c.exec(o),null===t)break;r.lastIndex=c.lastIndex}else c.lastIndex=r.lastIndex;e.push(t[0])}return e}function ln(t){return on(this,void 0,void 0,(function*(){const e=[],n=[];return t.forEach(e=>{if("cssRules"in e)try{pe(e.cssRules).forEach((t,o)=>{if(t.type===CSSRule.IMPORT_RULE){let i=o+1;const r=t.href,a=an(r).then(t=>t?cn(t):"").then(t=>sn(t).forEach(t=>{try{e.insertRule(t,t.startsWith("@import")?i+=1:e.cssRules.length)}catch(n){console.error("Error inserting rule from remote css",{rule:t,error:n})}})).catch(t=>{console.error("Error loading remote css",t.toString())});n.push(a)}})}catch(o){const i=t.find(t=>null==t.href)||document.styleSheets[0];null!=e.href&&n.push(an(e.href).then(t=>t?cn(t):"").then(t=>sn(t).forEach(t=>{i.insertRule(t,e.cssRules.length)})).catch(t=>{console.error("Error loading remote stylesheet",t.toString())})),console.error("Error inlining remote css file",o.toString())}}),Promise.all(n).then(()=>(t.forEach(t=>{if("cssRules"in t)try{pe(t.cssRules).forEach(t=>{e.push(t)})}catch(n){console.error("Error while reading CSS rules from "+t.href,n.toString())}}),e))}))}function un(t){return t.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>qe(t.style.getPropertyValue("src")))}function hn(t){return on(this,void 0,void 0,(function*(){return new Promise((e,n)=>{null==t.ownerDocument&&n(new Error("Provided element is not within a Document")),e(pe(t.ownerDocument.styleSheets))}).then(t=>ln(t)).then(un)}))}function fn(t,e){return on(this,void 0,void 0,(function*(){return hn(t).then(t=>Promise.all(t.map(t=>{const n=t.parentStyleSheet?t.parentStyleSheet.href:null;return Je(t.cssText,n,e)}))).then(t=>t.join("\n"))}))}function dn(t,e){return on(this,void 0,void 0,(function*(){return(null!=e.fontEmbedCSS?Promise.resolve(e.fontEmbedCSS):fn(t,e)).then(e=>{const n=document.createElement("style"),o=document.createTextNode(e);return n.appendChild(o),t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),t})}))}var mn=function(t,e,n,o){function i(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,r){function a(t){try{s(o.next(t))}catch(e){r(e)}}function c(t){try{s(o["throw"](t))}catch(e){r(e)}}function s(t){t.done?n(t.value):i(t.value).then(a,c)}s((o=o.apply(t,e||[])).next())}))};function pn(t,e={}){const n=e.width||ge(t),o=e.height||be(t);return{width:n,height:o}}function vn(t,e={}){return mn(this,void 0,void 0,(function*(){const{width:n,height:o}=pn(t,e);return Promise.resolve(t).then(t=>Ue(t,e,!0)).then(t=>dn(t,e)).then(t=>en(t,e)).then(t=>nn(t,e)).then(t=>Se(t,n,o))}))}const gn=16384;function bn(t){(t.width>gn||t.height>gn)&&(t.width>gn&&t.height>gn?t.width>t.height?(t.height*=gn/t.width,t.width=gn):(t.width*=gn/t.height,t.height=gn):t.width>gn?(t.height*=gn/t.width,t.width=gn):(t.width*=gn/t.height,t.height=gn))}function yn(t,e={}){return mn(this,void 0,void 0,(function*(){return vn(t,e).then(we).then(n=>{const o=document.createElement("canvas"),i=o.getContext("2d"),r=e.pixelRatio||ye(),{width:a,height:c}=pn(t,e),s=e.canvasWidth||a,l=e.canvasHeight||c;return o.width=s*r,o.height=l*r,e.skipAutoScale||bn(o),o.style.width=""+s,o.style.height=""+l,e.backgroundColor&&(i.fillStyle=e.backgroundColor,i.fillRect(0,0,o.width,o.height)),i.drawImage(n,0,0,o.width,o.height),o})}))}function wn(t,e={}){return mn(this,void 0,void 0,(function*(){return yn(t,e).then(t=>t.toDataURL())}))}var xn={components:{ComponentWrapper:oe},model:{prop:"show",event:"change"},props:{show:{type:Boolean,default:!1},isScreenshot:{type:Boolean,default:!1}},computed:Object(c["b"])(["componentData","canvasStyleData"]),methods:{getStyle:A["f"],getCanvasStyle:A["b"],changeStyleWithScale:y["b"],close:function(){this.$emit("change",!1)},htmlToImage:function(){wn(this.$refs.container.querySelector(".canvas")).then((function(t){var e=document.createElement("a");e.setAttribute("download","screenshot"),e.href=t,e.click()})).catch((function(t){console.error("oops, something went wrong!",t)})).finally(this.close)}}},Sn=xn,Cn=(n("4f06"),Object(I["a"])(Sn,Jt,Kt,!1,null,"30ec2388",null)),On=Cn.exports,kn=n("7909"),En={components:{Preview:On},data:function(){return{isShowPreview:!1,needToChange:["top","left","width","height","fontSize"],scale:"100%",timer:null,isScreenshot:!1}},computed:Object(c["b"])(["componentData","canvasStyleData","areaData","curComponent","curComponentIndex"]),created:function(){d["a"].$on("preview",this.preview),d["a"].$on("save",this.save),d["a"].$on("clearCanvas",this.clearCanvas),this.scale=this.canvasStyleData.scale},methods:{format:function(t){return Object(kn["b"])(t,Object(kn["a"])(parseFloat(this.scale),100))},getOriginStyle:function(t){return Object(kn["a"])(t,Object(kn["a"])(parseFloat(this.canvasStyleData.scale),100))},handleScaleChange:function(){var t=this;clearTimeout(this.timer),this.timer=setTimeout((function(){t.scale=~~t.scale||1;var e=Object(P["b"])(t.componentData);e.forEach((function(e){Object.keys(e.style).forEach((function(n){if(t.needToChange.includes(n)){if("fontSize"===n&&""===e.style[n])return;e.style[n]=t.format(t.getOriginStyle(e.style[n]))}}))})),t.$store.commit("setComponentData",e),t.$store.commit("setCurComponent",{component:e[t.curComponentIndex],index:t.curComponentIndex}),t.$store.commit("setCanvasStyle",Object(f["a"])(Object(f["a"])({},t.canvasStyleData),{},{scale:t.scale}))}),1e3)},lock:function(){this.$store.commit("lock")},unlock:function(){this.$store.commit("unlock")},compose:function(){this.$store.commit("compose"),this.$store.commit("recordSnapshot")},decompose:function(){this.$store.commit("decompose"),this.$store.commit("recordSnapshot")},undo:function(){this.$store.commit("undo")},redo:function(){this.$store.commit("redo")},handleFileChange:function(t){var e=this,n=t.target.files[0];if(n.type.includes("image")){var o=new FileReader;o.onload=function(t){var n=t.target.result,o=new Image;o.onload=function(){e.$store.commit("addComponent",{component:Object(f["a"])(Object(f["a"])({},ft["a"]),{},{id:Object(Wt["a"])(),component:"Picture",label:"图片",icon:"",propValue:{url:n,flip:{horizontal:!1,vertical:!1}},style:Object(f["a"])(Object(f["a"])({},ft["b"]),{},{top:0,left:0,width:o.width,height:o.height})})}),e.$store.commit("recordSnapshot"),Object(P["a"])("#input").setAttribute("type","text"),Object(P["a"])("#input").setAttribute("type","file")},o.src=n},o.readAsDataURL(n)}else Object(qt["a"])("只能插入图片")},preview:function(t){this.isScreenshot=t,this.isShowPreview=!0,this.$store.commit("setEditMode","preview")},save:function(){localStorage.setItem("canvasData",JSON.stringify(this.componentData)),localStorage.setItem("canvasStyle",JSON.stringify(this.canvasStyleData)),this.$message.success("保存成功")},clearCanvas:function(){this.$store.commit("setCurComponent",{component:null,index:null}),this.$store.commit("setComponentData",[]),this.$store.commit("recordSnapshot")},handlePreviewChange:function(){this.$store.commit("setEditMode","edit")}}},$n=En,jn=(n("5aaf"),Object(I["a"])($n,zt,Ht,!1,null,"f98feb4c",null)),Ln=jn.exports,Pn=n("2c7d"),_n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"real-time-component-list"},t._l(t.componentData,(function(e,o){return n("div",{key:o,staticClass:"list",class:{actived:t.transformIndex(o)===t.curComponentIndex},on:{click:function(e){t.onClick(t.transformIndex(o))}}},[n("span",{staticClass:"iconfont",class:"icon-"+t.getComponent(o).icon}),n("span",[t._v(t._s(t.getComponent(o).label))]),n("div",{staticClass:"icon-container"},[n("span",{staticClass:"iconfont icon-shangyi",on:{click:function(e){t.upComponent(t.transformIndex(o))}}}),n("span",{staticClass:"iconfont icon-xiayi",on:{click:function(e){t.downComponent(t.transformIndex(o))}}}),n("span",{staticClass:"iconfont icon-shanchu",on:{click:function(e){t.deleteComponent(t.transformIndex(o))}}})])])})),0)},Dn=[],In={computed:Object(c["b"])(["componentData","curComponent","curComponentIndex"]),methods:{getComponent:function(t){return this.componentData[this.componentData.length-1-t]},transformIndex:function(t){return this.componentData.length-1-t},onClick:function(t){this.setCurComponent(t)},deleteComponent:function(){var t=this;setTimeout((function(){t.$store.commit("deleteComponent"),t.$store.commit("recordSnapshot")}))},upComponent:function(){var t=this;setTimeout((function(){t.$store.commit("upComponent"),t.$store.commit("recordSnapshot")}))},downComponent:function(){var t=this;setTimeout((function(){t.$store.commit("downComponent"),t.$store.commit("recordSnapshot")}))},setCurComponent:function(t){this.$store.commit("setCurComponent",{component:this.componentData[t],index:t})}}},Nn=In,Mn=(n("9a5d"),Object(I["a"])(Nn,_n,Dn,!1,null,"701a7024",null)),An=Mn.exports,Tn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"attr-container"},[n("el-form",t._l(Object.keys(t.options),(function(e,o){return n("el-form-item",{key:o,attrs:{label:t.options[e]}},[t.isIncludesColor(e)?n("el-color-picker",{attrs:{"show-alpha":""},model:{value:t.canvasStyleData[e],callback:function(n){t.$set(t.canvasStyleData,e,n)},expression:"canvasStyleData[key]"}}):n("el-input",{attrs:{type:"number"},model:{value:t.canvasStyleData[e],callback:function(n){t.$set(t.canvasStyleData,e,t._n(n))},expression:"canvasStyleData[key]"}})],1)})),1)],1)},Rn=[],Fn={data:function(){return{options:{color:"颜色",opacity:"不透明度",backgroundColor:"背景色",fontSize:"字体大小"}}},computed:Object(c["b"])(["canvasStyleData"]),methods:{isIncludesColor:function(t){return t.toLowerCase().includes("color")}}},Un=Fn,Vn=(n("2187"),Object(I["a"])(Un,Tn,Rn,!1,null,null,null)),Gn=Vn.exports,Yn={components:{Editor:lt,ComponentList:vt,AnimationList:At,EventList:Bt,Toolbar:Ln,RealTimeComponentList:An,CanvasAttr:Gn},data:function(){return{activeName:"attr",reSelectAnimateIndex:void 0}},computed:Object(c["b"])(["componentData","curComponent","isClickComponent","canvasStyleData","editor"]),created:function(){this.restore(),Object(Pn["b"])()},methods:{restore:function(){localStorage.getItem("canvasData")&&this.$store.commit("setComponentData",this.resetID(JSON.parse(localStorage.getItem("canvasData")))),localStorage.getItem("canvasStyle")&&this.$store.commit("setCanvasStyle",JSON.parse(localStorage.getItem("canvasStyle")))},resetID:function(t){var e=this;return t.forEach((function(t){t.id=Object(Wt["a"])(),"Group"===t.component&&e.resetID(t.propValue)})),t},handleDrop:function(t){t.preventDefault(),t.stopPropagation();var e=t.dataTransfer.getData("index"),n=this.editor.getBoundingClientRect();if(e){var o=Object(P["b"])(ft["c"][e]);o.style.top=t.clientY-n.y,o.style.left=t.clientX-n.x,o.id=Object(Wt["a"])(),this.$store.commit("addComponent",{component:o}),this.$store.commit("recordSnapshot")}},handleDragOver:function(t){t.preventDefault(),t.dataTransfer.dropEffect="copy"},handleMouseDown:function(t){t.stopPropagation(),this.$store.commit("setClickComponentStatus",!1),this.$store.commit("setInEditorStatus",!0)},deselectCurComponent:function(t){this.isClickComponent||this.$store.commit("setCurComponent",{component:null,index:null}),2!=t.button&&this.$store.commit("hideContextMenu")}}},Xn=Yn,Bn=(n("21bb"),Object(I["a"])(Xn,o,i,!1,null,null,null));e["default"]=Bn.exports},d784:function(t,e,n){"use strict";n("ac1f");var o=n("e330"),i=n("6eeb"),r=n("9263"),a=n("d039"),c=n("b622"),s=n("9112"),l=c("species"),u=RegExp.prototype;t.exports=function(t,e,n,h){var f=c(t),d=!a((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),m=d&&!a((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[l]=function(){return n},n.flags="",n[f]=/./[f]),n.exec=function(){return e=!0,null},n[f](""),!e}));if(!d||!m||n){var p=o(/./[f]),v=e(f,""[t],(function(t,e,n,i,a){var c=o(t),s=e.exec;return s===r||s===u.exec?d&&!a?{done:!0,value:p(e,n,i)}:{done:!0,value:c(n,e,i)}:{done:!1}}));i(String.prototype,t,v[0]),i(u,f,v[1])}h&&s(u[f],"sham",!0)}},d897:function(t,e,n){},e285:function(t,e,n){"use strict";n("ee2e")},e9c4:function(t,e,n){var o=n("23e7"),i=n("da84"),r=n("d066"),a=n("2ba4"),c=n("e330"),s=n("d039"),l=i.Array,u=r("JSON","stringify"),h=c(/./.exec),f=c("".charAt),d=c("".charCodeAt),m=c("".replace),p=c(1..toString),v=/[\uD800-\uDFFF]/g,g=/^[\uD800-\uDBFF]$/,b=/^[\uDC00-\uDFFF]$/,y=function(t,e,n){var o=f(n,e-1),i=f(n,e+1);return h(g,t)&&!h(b,i)||h(b,t)&&!h(g,o)?"\\u"+p(d(t,0),16):t},w=s((function(){return'"\\udf06\\ud834"'!==u("\udf06\ud834")||'"\\udead"'!==u("\udead")}));u&&o({target:"JSON",stat:!0,forced:w},{stringify:function(t,e,n){for(var o=0,i=arguments.length,r=l(i);o<i;o++)r[o]=arguments[o];var c=a(u,null,r);return"string"==typeof c?m(c,v,y):c}})},edd9:function(t,e,n){},ee2e:function(t,e,n){},fd09:function(t,e,n){}}]);
//# sourceMappingURL=chunk-29822737.28e1af1d.js.map