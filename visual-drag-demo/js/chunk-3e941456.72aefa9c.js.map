{"version":3,"sources":["webpack:///./src/custom-component/VText.vue?39ca","webpack:///./src/custom-component/VText.vue?d3fe","webpack:///src/custom-component/VText.vue","webpack:///./src/custom-component/VText.vue?de99","webpack:///./src/custom-component/VText.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","editMode","staticClass","on","stopPropagation","ref","class","canEdit","style","verticalAlign","element","attrs","id","domProps","_s","propValue","setEdit","clearStyle","stopPropagation2","handleBlur","handleInput","staticRenderFns","component"],"mappings":"kHAAA,W,gECAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,MAAwB,QAAhBF,EAAIM,SAAoBF,EAAG,MAAM,CAACG,YAAY,SAASC,GAAG,CAAC,QAAUR,EAAIS,kBAAkB,CAACL,EAAG,MAAM,CAACM,IAAI,OAAOC,MAAM,CAAEC,QAASZ,EAAIY,SAAUC,MAAM,CAAGC,cAAed,EAAIe,QAAQF,MAAMC,eAAiBE,MAAM,CAAC,gBAAkBhB,EAAIY,QAAQ,SAAWZ,EAAIe,QAAQE,IAAIC,SAAS,CAAC,UAAYlB,EAAImB,GAAGnB,EAAIe,QAAQK,YAAYZ,GAAG,CAAC,SAAWR,EAAIqB,QAAQ,MAAQrB,EAAIsB,WAAW,UAAYtB,EAAIuB,iBAAiB,KAAOvB,EAAIwB,WAAW,MAAQxB,EAAIyB,iBAAiBrB,EAAG,MAAM,CAACG,YAAY,UAAU,CAACH,EAAG,MAAM,CAACS,MAAM,CAAGC,cAAed,EAAIe,QAAQF,MAAMC,eAAiBI,SAAS,CAAC,UAAYlB,EAAImB,GAAGnB,EAAIe,QAAQK,iBAClrBM,EAAkB,G,8ECgBtB,GACE,MAAF,CACI,UAAJ,CACM,KAAN,OACM,SAAN,GAEI,QAAJ,CACM,KAAN,SAGE,KAVF,WAWI,MAAJ,CACM,SAAN,EACM,QAAN,GACM,KAAN,oBACM,YAAN,IAGE,SAAF,kBACA,gBACA,cAGE,QAAF,CACI,YADJ,SACA,GACM,KAAN,gDAGI,gBALJ,SAKA,GACA,wBACQ,KAAR,cACA,gDACQ,EAAR,mBAII,iBAbJ,SAaA,GACA,cACQ,EAAR,mBAII,WAnBJ,SAmBA,GACM,OAAN,OAAM,CAAN,GACM,KAAN,gDAGI,WAxBJ,SAwBA,GACM,KAAN,qCACM,KAAN,YAGI,QA7BJ,WA8BM,KAAN,WAEM,KAAN,6BAGI,WAnCJ,SAmCA,GACM,IAAN,wBACA,yBACM,EAAN,sBACM,EAAN,kBACM,EAAN,eChF+U,I,wBCQ3UC,EAAY,eACd,EACA5B,EACA2B,GACA,EACA,KACA,WACA,MAIa,aAAAC,E","file":"js/chunk-3e941456.72aefa9c.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VText.vue?vue&type=style&index=0&id=dabd5500&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.editMode == 'edit')?_c('div',{staticClass:\"v-text\",on:{\"keydown\":_vm.stopPropagation}},[_c('div',{ref:\"text\",class:{ canEdit: _vm.canEdit },style:({ verticalAlign: _vm.element.style.verticalAlign }),attrs:{\"contenteditable\":_vm.canEdit,\"tabindex\":_vm.element.id},domProps:{\"innerHTML\":_vm._s(_vm.element.propValue)},on:{\"dblclick\":_vm.setEdit,\"paste\":_vm.clearStyle,\"mousedown\":_vm.stopPropagation2,\"blur\":_vm.handleBlur,\"input\":_vm.handleInput}})]):_c('div',{staticClass:\"v-text\"},[_c('div',{style:({ verticalAlign: _vm.element.style.verticalAlign }),domProps:{\"innerHTML\":_vm._s(_vm.element.propValue)}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div v-if=\"editMode == 'edit'\" class=\"v-text\" @keydown=\"stopPropagation\">\n        <!-- tabindex >= 0 使得双击时聚集该元素 -->\n        <div :contenteditable=\"canEdit\" :class=\"{ canEdit }\" @dblclick=\"setEdit\" :tabindex=\"element.id\" @paste=\"clearStyle\"\n            @mousedown=\"stopPropagation2\" @blur=\"handleBlur\" ref=\"text\" v-html=\"element.propValue\" @input=\"handleInput\"\n            :style=\"{ verticalAlign: element.style.verticalAlign }\"\n        ></div>\n    </div>\n    <div v-else class=\"v-text\">\n        <div v-html=\"element.propValue\" :style=\"{ verticalAlign: element.style.verticalAlign }\"></div>\n    </div>\n</template>\n\n<script>\nimport { mapState } from 'vuex'\nimport { clearStyle } from '@/utils/style'\n\nexport default {\n    props: {\n        propValue: {\n            type: String,\n            require: true,\n        },\n        element: {\n            type: Object,\n        },\n    },\n    data() {\n        return {\n            canEdit: false,\n            ctrlKey: 17,\n            keys: [67, 68, 86, 88, 89, 90], // 复制 删除 撤销 重做 剪切 删除键\n            isCtrlDown: false,\n        }\n    },\n    computed: {\n        ...mapState([\n            'editMode',\n        ]),\n    },\n    methods: {\n        handleInput(e) {\n            this.$emit('input', this.element, e.target.innerHTML)\n        },\n\n        stopPropagation(e) {\n            if (e.keyCode == this.ctrlKey) {\n                this.isCtrlDown = true\n            } else if (this.isCtrlDown && this.keys.includes(e.keyCode)) {\n                e.stopPropagation()\n            }\n        },\n\n        stopPropagation2(e) {\n            if (this.canEdit) {\n                e.stopPropagation()\n            }\n        },\n\n        clearStyle(e) {\n            clearStyle(e)\n            this.$emit('input', this.element, e.target.innerHTML)\n        },\n\n        handleBlur(e) {\n            this.element.propValue = e.target.innerHTML\n            this.canEdit = false\n        },\n\n        setEdit() {\n            this.canEdit = true\n            // 全选\n            this.selectText(this.$refs.text)\n        },\n\n        selectText(element) {\n            const selection = window.getSelection()\n            const range = document.createRange()\n            range.selectNodeContents(element)\n            selection.removeAllRanges()\n            selection.addRange(range)\n        },\n    },\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.v-text {\n    width: 100%;\n    height: 100%;\n    overflow: auto;\n    display: table;\n    padding: 0 5px;\n\n    div {\n        display: table-cell;\n        width: 100%;\n        height: 100%;\n        outline: none;\n        overflow: auto;\n    }\n\n    .canEdit {\n        cursor: text;\n    }\n\n    .text {\n        border: 1px solid #ddd;\n        padding: 5px 10px;\n        white-space: normal;\n        word-break: break-all;\n    }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VText.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VText.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VText.vue?vue&type=template&id=dabd5500&scoped=true&\"\nimport script from \"./VText.vue?vue&type=script&lang=js&\"\nexport * from \"./VText.vue?vue&type=script&lang=js&\"\nimport style0 from \"./VText.vue?vue&type=style&index=0&id=dabd5500&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dabd5500\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}